pipeline {
    agent any
stages {
	    stage (hello) {
            steps {
	    sh '''
	    report_file="${HOME}/report/report"
	    cd ${HOME}
	    mkdir report
	    echo "hello this is build number ${BUILD_NUMBER}" >> ${report_file}
	    echo "our environment virables are:" >> ${report_file}
	    printenv >> ${report_file}'''
	    }
	    }
	    stage(scm) {
		steps {
		sh '''
		echo "downloading from github" 
		echo "downloading from github" >> ${report_file}
		'''
		checkout scm
		sh ''' 
		echo "changing permissions" 
		echo "changing permissions" >> ${report_file}
		cd ${WORKSPACE}/scripts
		chmod 755 *'''
		 }
		 }	
		
		stage(bash) {
		when {
		         expression { params.cparam == 'bash' || params.cparam == 'all' }
		     }
	       steps {
              sh '''echo "running bash file"
	      	    echo "running bash file" >> ${report_file}
                    bash ${WORKSPACE}/scripts/bashfile.sh'''

				 }
					}
	    stage(python) {
		when {
		         expression { params.cparam == 'python' || params.cparam == 'all' }
		     }
	       steps {
              sh '''echo "running python file" 
	      	    echo "running python file" >> ${report_file}
	      python ${WORKSPACE}/scripts/pyfile.py'''
				 }
					  }	
    stage(c) {
		when {
		         expression { params.cparam == 'c' || params.cparam == 'all' }
		     }
	       steps {
              sh '''echo "compiling c file"
	      		echo "compiling c file" >> ${report_file}
              gcc ${WORKSPACE}/scripts/cfile.c -o crunfile
	           echo "running compiled file"
		   echo "running compiled file"  >> ${report_file}
              ${WORKSPACE}/crunfile'''
		         }
	         }	
        }
    }
